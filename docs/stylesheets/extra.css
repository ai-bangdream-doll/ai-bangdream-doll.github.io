.social-links a {
  text-decoration: none;
  margin-right: 15px; /* 图标间距 */
}
.social-links i:hover {
  opacity: 0.8;
  transform: scale(1.1);
}

/* 节日装饰基础样式 */
.festival-decoration {
    pointer-events: none; /* 装饰不干扰点击 */
    position: fixed;
    z-index: 9998;
}
/* 雪花 (圣诞) */
.snowflake {
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    position: fixed;
    top: -10px;
    opacity: 0.8;
    animation: fall linear forwards;
}
/* 彩带 (新年) */
.confetti {
    width: 15px;
    height: 5px;
    position: fixed;
    top: -5px;
    opacity: 0.9;
}
@keyframes fall {
    to { transform: translateY(100vh) rotate(360deg); }
}

/* 弹窗容器与开关 - 关键修改 */
#festivalPopupContainer {
    position: fixed;
    z-index: 9999;
    /* 初始位置在左侧视野外（使用弹窗宽度+10px） */
    left: -310px; /* 300px弹窗宽度 + 10px缓冲 */
    top: 30vh;
    /* 注意：这里不设置transition，由JS控制动画 */
}

#festivalPopup {
    width: 300px;
    min-height: 350px;
    background: linear-gradient(145deg, #1a472a, #0d2818);
    border: 3px solid #c41e3a;
    border-radius: 20px;
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.6), inset 0 1px 1px rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
    font-family: 'Comic Sans MS', 'Segoe UI Emoji', cursive;
}
/* 弹窗顶部装饰条 */
.popup-header-bar {
    height: 25px;
    background: linear-gradient(to right, #c41e3a, #ff6b6b);
    border-bottom: 2px solid gold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 15px;
    color: white;
    font-weight: bold;
    font-size: 0.9em;
    letter-spacing: 1px;
}
/* ==================== 优化1：增大基础尺寸与热区 ==================== */
/* ==================== 关闭按钮优化 - 精准对齐版 ==================== */
.popup-header-bar {
    /* 确保标题栏本身是一个稳固的flex容器，用于居中子项 */
    display: flex;
    justify-content: space-between;
    align-items: center; /* 这是垂直居中的关键 */
    height: 25px;
    padding: 0 15px;
    background: linear-gradient(to right, #c41e3a, #ff6b6b);
    border-bottom: 2px solid gold;
    color: white;
    font-weight: bold;
    font-size: 0.9em;
    letter-spacing: 1px;
}

.popup-close-btn {
    background: #ff4757;
    border: none;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    font-weight: bold;
    cursor: pointer;
    /* 核心：按钮自身也使用flex居中内容 */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    position: relative;
    /* 重置可能影响定位的属性 */
    margin: 0;
    top: 0;
    line-height: 1;
}
/* 透明热区 - 使用绝对定位从中心向外扩展 */
.popup-close-btn::after {
    content: '';
    position: absolute;
    /* 核心修正：从按钮中心点开始，向四周均匀扩展 */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* 这个变换确保绝对中心对齐 */
    width: 44px;  /* 总热区宽度 */
    height: 44px; /* 总热区高度 */
}
.popup-close-btn:hover { background: #ff3742; }
.popup-close-btn:active {
    transform: scale(0.92);
    transition: transform 0.1s;
}

/* ==================== 移动端专属优化 ==================== */
@media (max-width: 768px) {
    .popup-header-bar {
        min-height: 45px; /* 增加高度 */
        padding: 0 15px;
        position: relative; /* 新增 */
    }
    /* 新的热区容器 */
    .close-hit-area {
        position: absolute; /* 绝对定位到标题栏右侧 */
        right: 5px; /* 微调右间距 */
        top: 50%;
        transform: translateY(-50%); /* 垂直居中 */
        width: 60px; /* 热区宽度 */
        height: 50px; /* 热区高度 */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        /* background: rgba(0,255,0,0.3); */ /* 调试用 */
    }
    /* 按钮本身恢复常规样式 */
    .popup-close-btn {
        position: static; /* 移除绝对定位 */
        transform: none; /* 移除变换 */
        width: 38px;
        height: 38px;
        font-size: 1.4em;
        /* 按钮在.close-hit-area中通过flex居中 */
    }
}
/* ==================== 优化3：增强点击反馈（可选但推荐） ==================== */
.popup-close-btn:active {
    transform: scale(0.92); /* 按下时稍微缩小 */
    transition: transform 0.1s;
}

/* 弹窗内容区 */
.popup-content {
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* 图片容器 - 关键修改：1:1图片无留白 */
.popup-image-container {
    width: 100%;
    /* 创建1:1正方形容器 */
    aspect-ratio: 1 / 1;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    margin-bottom: 15px;
    border-radius: 10px;
    background-color: rgba(255, 255, 255, 0.05);
}

/* 关键修改：确保1:1图片完全填充容器，不留白 */
.popup-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 改为cover确保完全填充，不留白 */
    display: block;
}
/* 艺术文字 */
.art-text {
    color: #ffde7d;
    font-size: 1.8em;
    font-weight: bold;
    text-shadow: 2px 2px 4px #000, 0 0 10px #c41e3a;
    margin-bottom: 20px;
    min-height: 1.2em;
}
/* 接收按钮 */
.receive-btn {
    background: linear-gradient(to bottom, #ffde7d, #f9a602);
    color: #8b0000;
    border: none;
    padding: 12px 30px;
    border-radius: 50px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
}
.receive-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
}

/* 控制开关 (右上角) */
#festivalToggle {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 10000;
    background: rgba(20, 20, 20, 0.85);
    color: white;
    border: 2px solid #c41e3a;
    border-radius: 20px;
    padding: 8px 15px;
    cursor: pointer;
    font-family: sans-serif;
    font-size: 0.9em;
    display: flex;
    align-items: center;
    gap: 8px;
}
/* 关键修改：弹窗抖动动画（幅度更大） */
@keyframes gentleShake {
    0%, 100% { 
        transform: translateX(0) translateY(0) rotate(0deg); 
    }
    15% { 
        transform: translateX(-8px) translateY(-3px) rotate(-2deg); 
    }
    30% { 
        transform: translateX(8px) translateY(3px) rotate(1deg); 
    }
    45% { 
        transform: translateX(-5px) translateY(-2px) rotate(-1deg); 
    }
    60% { 
        transform: translateX(5px) translateY(2px) rotate(0.5deg); 
    }
    75% { 
        transform: translateX(-3px) translateY(-1px) rotate(-0.5deg); 
    }
}

.shaking {
    animation: gentleShake 0.8s ease-in-out !important;
}

/* 弹窗滑入动画 - 新增 */
@keyframes slideIn {
    from { 
        left: -310px;
        opacity: 0.5;
    }
    to { 
        left: 10px;
        opacity: 1;
    }
}

.slide-in {
    animation: slideIn 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* 弹窗淡出动画 - 2秒（原版） */
.fade-out {
    animation: fadeOut 2s forwards !important;
}

/* 新增：12秒淡出动画 */
.fade-out-slow {
    animation: fadeOut 12s forwards !important;
}

.popup-image-container video {
    object-fit: cover; /* 和图片一样，覆盖整个容器，无留白 */
    background-color: #000; /* 视频加载前的背景色 */
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

/* 移动端适配 */
@media (max-width: 768px) {
    #festivalPopup {
        width: 85vw;
        max-width: 300px;
    }
    
    #festivalPopupContainer {
        top: 20vh;
        /* 移动端初始位置调整 */
        left: -85vw;
    }
    
    @keyframes slideIn {
        from { 
            left: -85vw;
            opacity: 0.5;
        }
        to { 
            left: 10px;
            opacity: 1;
        }
    }
    
    .art-text { font-size: 1.5em; }
}